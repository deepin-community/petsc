
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Developing a Merge Request &#8212; PETSc 3.20.6 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=796348d33e8b1d947c94" rel="stylesheet">
<link href="../../_static/styles/bootstrap.css?digest=796348d33e8b1d947c94" rel="stylesheet">
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=796348d33e8b1d947c94" rel="stylesheet">

  
  <link href="../../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=796348d33e8b1d947c94" rel="stylesheet">
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2">
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2">
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2">

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css" />
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/katex-math.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=796348d33e8b1d947c94">
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=796348d33e8b1d947c94">

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/design-tabs.js"></script>
    <script src="../../_static/katex.min.js"></script>
    <script src="../../_static/auto-render.min.js"></script>
    <script src="../../_static/katex_autorenderer.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'developers/contributing/developingmr';</script>
    <link rel="shortcut icon" href="../../_static/petsc_favicon.png"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Submitting a Merge Request" href="submittingmr.html" />
    <link rel="prev" title="Contributing to PETSc" href="index.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="docsearch:language" content="en">
  </head>
  
  
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="180" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>

  
  <input type="checkbox" class="sidebar-toggle" name="__primary" id="__primary">
  <label class="overlay overlay-primary" for="__primary"></label>

  
  <input type="checkbox" class="sidebar-toggle" name="__secondary" id="__secondary">
  <label class="overlay overlay-secondary" for="__secondary"></label>

  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
      
<form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
    </div>
  </div>

  
  <nav class="bd-header navbar navbar-expand-lg bd-navbar" id="navbar-main"><div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
      <span class="fa-solid fa-bars"></span>
  </label>
  <div id="navbar-start">
    
    
  


<a class="navbar-brand logo" href="../../index.html">

  
  
  
  
  
  
  

  
    <img src="../../_static/PETSc-TAO_RGB.svg" class="logo__image only-light" alt="Logo image">
    <img src="../../_static/PETSc-TAO_RGB_white.svg" class="logo__image only-dark" alt="Logo image">
  
  
</a>
    
  </div>

  
  <div class="col-lg-9 navbar-header-items">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <nav class="navbar-nav">
    <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">
        Site Navigation
    </p>
    <ul id="navbar-main-elements" class="navbar-nav">
        
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../overview/index.html">
                        Overview
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../install/index.html">
                        Install
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../tutorials/index.html">
                        Tutorials
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../manual/index.html">
                        User-Guide
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../manualpages/index.html">
                        C/Fortran API
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../petsc4py/index.html">
                        petsc4py API
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../faq/index.html">
                        FAQ
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../community/index.html">
                        Community
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="../index.html">
                        Developers
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../miscellaneous/index.html">
                        Misc.
                      </a>
                    </li>
                
    </ul>
</nav>
      </div>
      
    </div>

    <div id="navbar-end">
      
        <div class="navbar-end-item navbar-persistent--container">
          
<button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-toggle="tooltip">
  <i class="fa-solid fa-magnifying-glass"></i>
</button>
        </div>
      
      
      <div class="navbar-end-item">
        <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
</button>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          <a href="https://gitlab.com/petsc/petsc" title="GitLab" class="nav-link" rel="noopener" target="_blank" data-toggle="tooltip"><span><i class="fab fa-gitlab"></i></span>
            <label class="sr-only">GitLab</label></a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>


  
  
    <div class="navbar-persistent--mobile">
<button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-toggle="tooltip">
  <i class="fa-solid fa-magnifying-glass"></i>
</button>
    </div>
  

  
  <label class="sidebar-toggle secondary-toggle" for="__secondary">
      <span class="fa-solid fa-outdent"></span>
  </label>
  

</div>
  </nav>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        
  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
      
      <div class="navbar-center-item">
        <nav class="navbar-nav">
    <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">
        Site Navigation
    </p>
    <ul id="navbar-main-elements" class="navbar-nav">
        
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../overview/index.html">
                        Overview
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../install/index.html">
                        Install
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../tutorials/index.html">
                        Tutorials
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../manual/index.html">
                        User-Guide
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../manualpages/index.html">
                        C/Fortran API
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../petsc4py/index.html">
                        petsc4py API
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../faq/index.html">
                        FAQ
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../community/index.html">
                        Community
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="../index.html">
                        Developers
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../miscellaneous/index.html">
                        Misc.
                      </a>
                    </li>
                
    </ul>
</nav>
      </div>
      
      </div>
    

    
    
    <div class="sidebar-header-items__end">
      
      <div class="navbar-end-item">
        <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
</button>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          <a href="https://gitlab.com/petsc/petsc" title="GitLab" class="nav-link" rel="noopener" target="_blank" data-toggle="tooltip"><span><i class="fab fa-gitlab"></i></span>
            <label class="sr-only">GitLab</label></a>
        </li>
      </ul>
      </div>
      
    </div>
    
  </div>

  
  <div class="sidebar-start-items sidebar-primary__section">
    <div class="sidebar-start-items__item"><nav class="bd-links" id="bd-docs-nav" aria-label="Section navigation">
  <p class="bd-links__title" role="heading" aria-level="1">
    Section Navigation
  </p>
  <div class="bd-toc-item navbar-nav">
    <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../communication.html">PETSc Developers Communication Channels</a></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="index.html">Contributing to PETSc</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Developing a Merge Request</a></li>
<li class="toctree-l2"><a class="reference internal" href="submittingmr.html">Submitting a Merge Request</a></li>
<li class="toctree-l2"><a class="reference internal" href="pipelines.html">GitLab CI Pipelines</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../mrmanagement.html">Merge request management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development.html">PETSc Development Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../style.html">PETSc Style and Usage Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../buildsystem.html">BuildSystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testing.html">PETSc Testing System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../documentation.html">Developing PETSc Documentation</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../design.html">The Design of PETSc</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../kernel.html">The PETSc Kernel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../objects.html">Basic Object Design and Implementation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../callbacks.html">How the Solvers Handle User Provided Callbacks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../matrices.html">The Various Matrix Classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../articles.html">Articles about PETSc Design</a></li>
</ul>
</li>
</ul>

  </div>
</nav>
    </div>
  </div>
  

  
  <div class="sidebar-end-items sidebar-primary__section">
    <div class="sidebar-end-items__item">
    </div>
  </div>

  
  <div id="rtd-footer-container"></div>

      </div>
      <main id="main-content" class="bd-main">
        
        
        <div class="bd-content">
          <div class="bd-article-container">
            
            <div class="bd-header-article">
                
            </div>
            
            
            <article class="bd-article" role="main">
              
  <section id="developing-a-merge-request">
<span id="ch-developingmr"></span><h1>Developing a Merge Request<a class="headerlink" href="#developing-a-merge-request" title="Permalink to this heading">#</a></h1>
<section id="select-the-integration-branch">
<span id="sec-integration-branches"></span><h2>Select the integration branch<a class="headerlink" href="#select-the-integration-branch" title="Permalink to this heading">#</a></h2>
<p><strong>Integration branches</strong> are permanent branches in a repository that developers can contribute to. PETSc has two integration branches:  <code class="docutils notranslate"><span class="pre">release</span></code>
and <code class="docutils notranslate"><span class="pre">main</span></code>. <strong>Feature branches</strong> are temporary branches created by developers to add or change a feature branch. A new feature branch is the basis for each
merge request.</p>
<section id="release">
<span id="sec-release-branch"></span><h3><code class="docutils notranslate"><span class="pre">release</span></code><a class="headerlink" href="#release" title="Permalink to this heading">#</a></h3>
<p>The <code class="docutils notranslate"><span class="pre">release</span></code> branch contains the latest PETSc release including bug-fixes.</p>
<p>Bug-fixes, along with most documentation fixes, should start from <code class="docutils notranslate"><span class="pre">release</span></code>.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>fetch
<span class="gp">$ </span>git<span class="w"> </span>checkout<span class="w"> </span>-b<span class="w"> </span>yourname/fix-component-name<span class="w"> </span>origin/release
</pre></div>
</div>
<p>Bug-fix updates, about every month, (e.g. 3.17.1) are tagged on <code class="docutils notranslate"><span class="pre">release</span></code> (e.g. v3.17.1).</p>
</section>
<section id="main">
<span id="sec-main-branch"></span><h3><code class="docutils notranslate"><span class="pre">main</span></code><a class="headerlink" href="#main" title="Permalink to this heading">#</a></h3>
<p>The <code class="docutils notranslate"><span class="pre">main</span></code> branch contains everything in the release branch as well as new features that have passed all testing
and will be in the next release (e.g. version 3.18). Users developing software based
on recently-added features in PETSc should follow <code class="docutils notranslate"><span class="pre">main</span></code>.</p>
<p>New features should start from <code class="docutils notranslate"><span class="pre">main</span></code>.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>fetch
<span class="gp">$ </span>git<span class="w"> </span>checkout<span class="w"> </span>-b<span class="w"> </span>yourname/fix-component-name<span class="w"> </span>origin/main
</pre></div>
</div>
</section>
</section>
<section id="start-a-new-feature-branch">
<span id="sec-developing-a-new-feature"></span><h2>Start a new feature branch<a class="headerlink" href="#start-a-new-feature-branch" title="Permalink to this heading">#</a></h2>
<ul>
<li><p>Determine the appropriate integration_branch to start from, <code class="docutils notranslate"><span class="pre">main</span></code> or <code class="docutils notranslate"><span class="pre">release</span></code> (for documentation and bug fixes only).</p></li>
<li><p>Create and switch to a new feature branch:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>fetch
<span class="gp">$ </span>git<span class="w"> </span>checkout<span class="w"> </span>-b<span class="w"> </span>&lt;loginname&gt;/&lt;affected-package&gt;-&lt;short-description&gt;<span class="w"> </span>origin/main<span class="w">  </span><span class="c1"># or origin/release</span>
</pre></div>
</div>
<p>For example, Barry’s new feature branch on removing CPP in <code class="docutils notranslate"><span class="pre">snes/</span></code> will
use</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>checkout<span class="w"> </span>-b<span class="w"> </span>barry/snes-removecpp<span class="w"> </span>origin/main
</pre></div>
</div>
<p>Use all lowercase and no additional underscores in the branch name.</p>
</li>
</ul>
</section>
<section id="develop-your-code">
<h2>Develop your code<a class="headerlink" href="#develop-your-code" title="Permalink to this heading">#</a></h2>
<ul>
<li><p>Write code and tests.</p></li>
<li><p>For any new features or API changes you introduced add information on them to <code class="docutils notranslate"><span class="pre">doc/changes/dev.rst`</span></code>.</p></li>
<li><p>Inspect changes and stage code using standard Git commands, e.g.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>status
<span class="gp">$ </span>git<span class="w"> </span>add<span class="w"> </span>file1<span class="w"> </span>file2
<span class="gp">$ </span>git<span class="w"> </span>commit
</pre></div>
</div>
</li>
<li><p>Commit code with good commit message, for example</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>commit
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ComponentName: one-line explanation of commit

After a blank line, write a more detailed explanation of the commit. Many tools do not auto-wrap this part, so wrap paragraph text at a reasonable length. Commit messages are meant for other people to read, possibly months or years later, so describe the rationale for the change in a manner that will make sense later, and which will be provide helpful search terms.

Use the imperative, e.g. &quot;Fix bug&quot;, not &quot;Fixed bug&quot;.

If any interfaces have changed, the commit should fix occurrences in PETSc itself and the message should state its impact on users.

We have defined several standard commit message tags you should use; this makes it easy to search for specific types of contributions. Multiple tags may be used in the same commit message.

/spend 1h or 30m

If other people contributed significantly to a commit, perhaps by reporting bugs or by writing an initial version of the patch, acknowledge them using tags at the end of the commit message.

Reported-by: Helpful User &lt;helpful@example.com&gt;
Based-on-patch-by: Original Idea &lt;original@example.com&gt;
Thanks-to: Incremental Improver &lt;improver@example.com&gt;

If work is done for a particular well defined funding source or project you should label the commit with one or more of the tags

Funded-by: My funding source
Project: My project name
</pre></div>
</div>
</li>
<li><p>Push the feature branch to the remote repository as desired:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">% </span>git<span class="w"> </span>push<span class="w"> </span>-u<span class="w"> </span>origin<span class="w"> </span>barry/snes-removecpp
</pre></div>
</div>
</li>
</ul>
</section>
<section id="test-your-branch">
<h2>Test your branch<a class="headerlink" href="#test-your-branch" title="Permalink to this heading">#</a></h2>
<ul>
<li><p>Include <a class="reference internal" href="../testing.html"><span class="doc">tests</span></a> which cover any changes to the source code.</p></li>
<li><p><a class="reference internal" href="../../manual/tests.html#sec-runningtests"><span class="std std-ref">Run the full test suite</span></a> on your machine.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>make<span class="w"> </span>alltests<span class="w"> </span><span class="nv">TIMEOUT</span><span class="o">=</span><span class="m">600</span>
</pre></div>
</div>
</li>
<li><p>Run the source checkers on your machine.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>make<span class="w"> </span>checkbadSource
<span class="gp">$ </span>make<span class="w"> </span>clangformat
<span class="gp">$ </span>make<span class="w"> </span>lint
</pre></div>
</div>
</li>
</ul>
</section>
<section id="maintain-a-clean-commit-history">
<span id="sec-clean-commit-history"></span><h2>Maintain a clean commit history<a class="headerlink" href="#maintain-a-clean-commit-history" title="Permalink to this heading">#</a></h2>
<p>If your contribution can be logically decomposed into 2 or more
separate contributions, submit them in sequence with different
branches and merge requests instead of all at once.</p>
<p>Often a branch’s commit history does not present a logical series of changes.
Extra commits from bug-fixes or tiny improvements may accumulate. One commit may contain multiple orthogonal changes.
The order of changes may be incorrect. Branches without a clean commit history will often break <code class="docutils notranslate"><span class="pre">git</span> <span class="pre">bisect</span></code>.
Ideally, each commit in an MR will pass the PETSc CI testing, while presenting a small-as-possible set of very closely related changes.</p>
<p>Use different commits for:</p>
<ul class="simple">
<li><p>fixing formatting and spelling mistakes,</p></li>
<li><p>fixing a bug,</p></li>
<li><p>adding a new feature,</p></li>
<li><p>adding another new feature.</p></li>
</ul>
<p>Rewriting history can be done in <a class="reference external" href="https://git-scm.com/book/en/v2/Git-Tools-Rewriting-History">several ways</a>; the easiest is often with the interactive <code class="docutils notranslate"><span class="pre">rebase</span></code> command, which allows one to combine (“squash”), rearrange, and edit commits.</p>
<p>It is better to clean up your commits regularly than to wait until you have a large number of them.</p>
<p>For example, if you have made three commits and the most recent two are fixes for the first, you could use</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>rebase<span class="w"> </span>-i<span class="w"> </span>HEAD~3
</pre></div>
</div>
<p>If the branch has already been pushed, the rewritten branch is not compatible with the remote copy of the branch. You must force push your changes with</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>push<span class="w"> </span>-f<span class="w"> </span>origin<span class="w"> </span>branch-name
</pre></div>
</div>
<p>to update the remote branch with your copy. This must be done with extreme care and only if you know someone else has not changed the remote copy of the branch,
otherwise you will lose those changes. Never do a <code class="docutils notranslate"><span class="pre">git</span> <span class="pre">pull</span></code> immediately after you rebase since that will merge the old branch (from GitLab) into your local one and create a mess <a class="footnote-reference brackets" href="#block-ugly-pull-merge" id="id1">2</a>.</p>
<p>You can use <code class="docutils notranslate"><span class="pre">git</span> <span class="pre">log</span></code> to see the recent changes to your branch and help determine what commits should be rearranged, combined, or split.
You may also find it helpful to use an additional tool such as
<a class="reference external" href="https://git-scm.com/docs/git-gui/">git-gui</a>, <a class="reference external" href="https://github.com/jesseduffield/lazygit">lazygit</a>, or <a class="reference external" href="https://git-scm.com/downloads/guis">various GUI tools</a>.</p>
</section>
<section id="rebase-your-branch-against-the-integration-branch">
<span id="sec-rebasing"></span><h2>Rebase your branch against the integration branch<a class="headerlink" href="#rebase-your-branch-against-the-integration-branch" title="Permalink to this heading">#</a></h2>
<p>You may also need to occasionally <a class="reference external" href="https://git-scm.com/book/en/v2/Git-Branching-Rebasing">rebase</a> your branch onto to the latest version of your <a class="reference internal" href="#sec-integration-branches"><span class="std std-ref">integration branch</span></a> <a class="footnote-reference brackets" href="#rebase-not-merge-upstream" id="id2">1</a>, if the integration branch has had relevant changes since you started working on your feature branch.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>fetch<span class="w"> </span>origin<span class="w">                              </span><span class="c1"># assume origin --&gt; PETSc upstream</span>
<span class="gp">$ </span>git<span class="w"> </span>checkout<span class="w"> </span>myname/component-feature
<span class="gp">$ </span>git<span class="w"> </span>branch<span class="w"> </span>myname/component-feature-backup-1<span class="w">  </span><span class="c1"># optional</span>
<span class="gp">$ </span>git<span class="w"> </span>rebase<span class="w"> </span>origin/main<span class="w">                        </span><span class="c1"># or origin/release</span>
</pre></div>
</div>
<p>Note that this type of rebasing is different than the <code class="docutils notranslate"><span class="pre">rebase</span> <span class="pre">-i</span></code> process for organizing your commits in a coherent manner.</p>
<p class="rubric">Footnotes</p>
<dl class="footnote brackets">
<dt class="label" id="rebase-not-merge-upstream"><span class="brackets"><a class="fn-backref" href="#id2">1</a></span></dt>
<dd><p>Rebasing is generally preferable to <a class="reference external" href="http://yarchive.net/comp/linux/git_merges_from_upstream.html">merging an upstream branch</a>.</p>
</dd>
<dt class="label" id="block-ugly-pull-merge"><span class="brackets"><a class="fn-backref" href="#id1">2</a></span></dt>
<dd><p>You may wish to <a class="reference external" href="https://git-scm.com/docs/git-config#Documentation/git-config.txt-pullff">make it impossible to perform these usually-undesired “non fast-forward” merges when pulling</a>, with <code class="docutils notranslate"><span class="pre">git</span> <span class="pre">config</span> <span class="pre">--global</span> <span class="pre">pull.ff</span> <span class="pre">only</span></code>.</p>
</dd>
</dl>
</section>
</section>


            </article>
            
            
            
            <footer class="bd-footer-article">
                <!-- Previous / next buttons -->
<div class='prev-next-area'>
  <a class='left-prev' id="prev-link" href="index.html" title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
          <p class="prev-next-subtitle">previous</p>
          <p class="prev-next-title">Contributing to PETSc</p>
      </div>
  </a>
  <a class='right-next' id="next-link" href="submittingmr.html" title="next page">
  <div class="prev-next-info">
      <p class="prev-next-subtitle">next</p>
      <p class="prev-next-title">Submitting a Merge Request</p>
  </div>
  <i class="fa-solid fa-angle-right"></i>
  </a>
</div>
            </footer>
            
          </div>
          
          
          
            <div class="bd-sidebar-secondary bd-toc">
              
<div class="toc-item">
  
<div class="tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
</div>
<nav id="bd-toc-nav" class="page-toc">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#select-the-integration-branch">
   Select the integration branch
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#release">
     <code class="docutils notranslate">
      <span class="pre">
       release
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#main">
     <code class="docutils notranslate">
      <span class="pre">
       main
      </span>
     </code>
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#start-a-new-feature-branch">
   Start a new feature branch
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#develop-your-code">
   Develop your code
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#test-your-branch">
   Test your branch
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#maintain-a-clean-commit-history">
   Maintain a clean commit history
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#rebase-your-branch-against-the-integration-branch">
   Rebase your branch against the integration branch
  </a>
 </li>
</ul>

</nav>
</div>

<div class="toc-item">
  
<div id="searchbox"></div>
</div>

<div class="toc-item">
  

<div class="tocsection editthispage">
    <a href="https://gitlab.com/petsc/petsc/edit/release/doc/developers/contributing/developingmr.rst">
        <i class="fa-solid fa-pencil"></i> Edit this page
    </a>
</div>

</div>

<div class="toc-item">
  
<div class="tocsection sourcelink">
    <a href="../../_sources/developers/contributing/developingmr.rst.txt">
        <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
</div>

</div>

            </div>
          
          
        </div>
        <footer class="bd-footer-content">
          <div class="bd-footer-content__inner">
            
          </div>
        </footer>
        
      </main>
    </div>
  </div>

  
    
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=796348d33e8b1d947c94"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=796348d33e8b1d947c94"></script>

  <footer class="bd-footer"><div class="bd-footer__inner container">
  
  <div class="footer-item">
    
<p class="copyright">

    &copy; Copyright 1991-2024, UChicago Argonne, LLC and the PETSc Development Team.<br>

</p>

  </div>
  
  <div class="footer-item">
    
<p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 5.3.0.<br>
</p>

  </div>
  
  <div class="footer-item">
    <p class="last-updated">
Last updated on 2024-03-29T09:10:29-0500 (v3.20.6).<br>
</p>
  </div>
  
</div>
  </footer>
  </body>
</html>